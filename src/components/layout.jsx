import React from 'react';
import PropTypes from 'prop-types';
import styled from 'react-emotion';
import 'prismjs/themes/prism-solarizedlight.css';
import TopBar from './TopBar';
import Sidebar from './Sidebar';

const MainContainer = styled('div')`
  height: 100vh;
  display: flex;
  flex-direction: column;
`;

const ContentContainer = styled('div')`
  padding:  0 16px;
  margin: 0 auto;
  max-width: 800px;
  width: 100%;
  flex: 1;
`;

const ScrollArea = styled('div')`
  overflow: auto;
`;

class Template extends React.Component {
  componentDidMount() {
    (function(window){var svgSprite='<svg><symbol id="icon-me" viewBox="0 0 1024 1024"><path d="M887.623983 958.261787l-55.851029 0c0-164.008354-132.684952-297.829176-300.272831-308.232107l0 0c-6.919597 0.48914-13.82282 1.052982-20.868283 1.052982-7.045463 0-13.948687-0.563842-20.868283-1.052982l0 0c-167.588903 10.401908-300.272831 144.223752-300.272831 308.232107l-55.851029 0c0-155.36858 101.601003-287.454898 244.122997-339.245448-95.088682-48.484248-160.346965-147.094126-160.346965-261.149788 0-161.939229 131.276882-293.216111 293.216111-293.216111s293.216111 131.276882 293.216111 293.216111c0 114.055662-65.258283 212.665541-160.346965 261.149788C786.02298 670.806889 887.623983 802.89423 887.623983 958.261787zM750.535745 357.86655c0-132.494617-107.409289-239.903905-239.903905-239.903905s-239.903905 107.409289-239.903905 239.903905 107.409289 239.903905 239.903905 239.903905S750.535745 490.361167 750.535745 357.86655z"  ></path></symbol><symbol id="icon-home" viewBox="0 0 1024 1024"><path d="M950.061011 562.508347l0.091074 0.044002L557.499263 124.402311c-12.186554-13.605879-28.640294-21.103644-46.342468-21.103644-17.656125 0-34.109866 7.497765-46.340421 21.103644L72.167646 562.55235c-8.231475 9.205663-7.515161 23.394826 1.555425 31.701003 4.26821 3.90596 9.606799 5.791913 14.898315 5.791913 6.046716 0 12.097526-2.469238 16.499789-7.408737l94.682429-105.653295 0 360.022657c0 37.134759 29.92966 67.352991 66.708308 67.352991l489.202785 0c36.778648 0 66.712401-30.218232 66.712401-67.352991L822.427098 486.98221l94.682429 105.653295c8.225335 9.207709 22.279423 9.925047 31.396057 1.571798C957.61915 585.856102 958.331371 571.711963 950.061011 562.508347zM600.101547 869.456205 422.211021 869.456205 422.211021 667.399279c0-12.394285 9.962909-22.451338 22.23849-22.451338l133.418662 0c12.273535 0 22.234397 10.057053 22.234397 22.451338L600.10257 869.456205zM777.998213 847.004867c0 12.392238-9.964956 22.451338-22.23849 22.451338L644.575458 869.456205 644.575458 667.399279c0-37.136805-29.92966-67.354014-66.708308-67.354014l-133.418662 0c-36.778648 0-66.710354 30.218232-66.710354 67.354014l0 202.057949-111.182218 0c-12.275581 0-22.23849-10.0591-22.23849-22.451338L244.317425 437.367209l253.495458-282.879696c3.647063-4.088108 8.40646-6.331195 13.34289-6.331195 4.937452 0 9.697873 2.243087 13.34289 6.331195l253.497505 282.879696L777.996167 847.004867z"  ></path></symbol><symbol id="icon-github" viewBox="0 0 1024 1024"><path d="M512 73.142857q119.428571 0 220.285714 58.857143T892 291.714286 950.857143 512q0 143.428571-83.714286 258T650.857143 928.571429q-15.428571 2.857143-22.857143-4t-7.428571-17.142858q0-1.714286 0.285714-43.714285t0.285714-76.857143q0-55.428571-29.714286-81.142857 32.571429-3.428571 58.571429-10.285715t53.714286-22.285714 46.285714-38 30.285714-60T792 489.142857q0-68-45.142857-117.714286 21.142857-52-4.571429-116.571428-16-5.142857-46.285714 6.285714t-52.571429 25.142857l-21.714285 13.714286q-53.142857-14.857143-109.714286-14.857143t-109.714286 14.857143q-9.142857-6.285714-24.285714-15.428571T330.285714 262.571429 281.714286 254.857143q-25.714286 64.571429-4.571429 116.571428-45.142857 49.714286-45.142857 117.714286 0 48.571429 11.714286 85.714286t30 60 46 38.285714 53.714285 22.285714 58.571429 10.285715q-22.285714 20.571429-28 58.857143-12 5.714286-25.714286 8.571428t-32.571428 2.857143-37.428572-12.285714T276.571429 728q-10.857143-18.285714-27.714286-29.714286t-28.285714-13.714285l-11.428572-1.714286q-12 0-16.571428 2.571428t-2.857143 6.571429 5.142857 8 7.428571 6.857143l4 2.857143q12.571429 5.714286 24.857143 21.714285t18 29.142858l5.714286 13.142857q7.428571 21.714286 25.142857 35.142857t38.285714 17.142857 39.714286 4 31.714286-2l13.142857-2.285714q0 21.714286 0.285714 50.571428t0.285714 31.142857q0 10.285714-7.428571 17.142858t-22.857143 4q-132.571429-44-216.285714-158.571429T73.142857 512q0-119.428571 58.857143-220.285714T291.714286 132 512 73.142857zM239.428571 703.428571q1.714286-4-4-6.857142-5.714286-1.714286-7.428571 1.142857-1.714286 4 4 6.857143 5.142857 3.428571 7.428571-1.142858z m17.714286 19.428572q4-2.857143-1.142857-9.142857-5.714286-5.142857-9.142857-1.714286-4 2.857143 1.142857 9.142857 5.714286 5.714286 9.142857 1.714286z m17.142857 25.714286q5.142857-4 0-10.857143-4.571429-7.428571-9.714285-3.428572-5.142857 2.857143 0 10.285715t9.714285 4z m24 24q4.571429-4.571429-2.285714-10.857143-6.857143-6.857143-11.428571-1.714286-5.142857 4.571429 2.285714 10.857143 6.857143 6.857143 11.428571 1.714286z m32.571429 14.285714q1.714286-6.285714-7.428572-9.142857-8.571429-2.285714-10.857142 4t7.428571 8.571428q8.571429 3.428571 10.857143-3.428571z m36 2.857143q0-7.428571-9.714286-6.285715-9.142857 0-9.142857 6.285715 0 7.428571 9.714286 6.285714 9.142857 0 9.142857-6.285714z m33.142857-5.714286q-1.142857-6.285714-10.285714-5.142857-9.142857 1.714286-8 8.571428t10.285714 4.571429 8-8z"  ></path></symbol><symbol id="icon-stack-overflow" viewBox="0 0 1024 1024"><path d="M291.146 718.288h398.715v81.788H291.146zM301.452 620.776l16.26-80.152 390.74 79.265-16.259 80.152zM351.533 433.292l35.488-73.69 359.243 173.003-35.487 73.69zM449.942 253.895l51.747-63.336 308.764 252.267-51.746 63.336zM589.167 111.406l65.88-48.467 236.278 321.165-65.88 48.467z"  ></path><path d="M774.205 884.419H209.358V641.612h-76.676v319.483h718.199V641.612h-76.676z"  ></path></symbol></svg>';var script=function(){var scripts=document.getElementsByTagName("script");return scripts[scripts.length-1]}();var shouldInjectCss=script.getAttribute("data-injectcss");var ready=function(fn){if(document.addEventListener){if(~["complete","loaded","interactive"].indexOf(document.readyState)){setTimeout(fn,0)}else{var loadFn=function(){document.removeEventListener("DOMContentLoaded",loadFn,false);fn()};document.addEventListener("DOMContentLoaded",loadFn,false)}}else if(document.attachEvent){IEContentLoaded(window,fn)}function IEContentLoaded(w,fn){var d=w.document,done=false,init=function(){if(!done){done=true;fn()}};var polling=function(){try{d.documentElement.doScroll("left")}catch(e){setTimeout(polling,50);return}init()};polling();d.onreadystatechange=function(){if(d.readyState=="complete"){d.onreadystatechange=null;init()}}}};var before=function(el,target){target.parentNode.insertBefore(el,target)};var prepend=function(el,target){if(target.firstChild){before(el,target.firstChild)}else{target.appendChild(el)}};function appendSvg(){var div,svg;div=document.createElement("div");div.innerHTML=svgSprite;svgSprite=null;svg=div.getElementsByTagName("svg")[0];if(svg){svg.setAttribute("aria-hidden","true");svg.style.position="absolute";svg.style.width=0;svg.style.height=0;svg.style.overflow="hidden";prepend(svg,document.body)}}if(shouldInjectCss&&!window.__iconfont__svg__cssinject__){window.__iconfont__svg__cssinject__=true;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}ready(appendSvg)})(window) // eslint-disable-line
  }

  render() {
    const { children, location, posts } = this.props;
    return (
      <div>
        <Sidebar location={location} posts={posts} />
        <MainContainer>
          <TopBar />
          <ScrollArea>
            <ContentContainer>
              {children}
            </ContentContainer>
          </ScrollArea>
        </MainContainer>
      </div>
    );
  }
}

Template.propTypes = {
  children: PropTypes.node.isRequired,
};

export default Template;
